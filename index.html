<!DOCTYPE html>
<html lang="id" style="scroll-behavior: smooth;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Pernikahan | Endeh & Idess</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Font: Playfair Display (Judul) & Poppins (Teks) -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400..900&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        /*
         * PALET WARNA BARU (Dusty Rose & Muted Gold)
         * Latar: #FBF9F6 (Krem Sangat Lembut)
         * Teks Utama: #5C5450 (Cokelat Abu-abu)
         * Judul/Utama: #B18F93 (Dusty Rose Tua)
         * Aksen: #C9B88E (Muted Gold/Emas Kusam)
        */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #FBF9F6;
            color: #5C5450; /* Warna teks utama lebih lembut */
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            color: #B18F93; /* Warna Dusty Rose Tua untuk judul */
        }
        /* Teks h2/h3 di footer harus putih karena background-nya gelap */
        footer h2, footer h3 {
            color: #FFFFFF;
        }
        .section {
            padding: 4rem 1.5rem; /* 64px 24px */
            max-width: 1024px; /* lg */
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }

        /* Dekorasi Bunga untuk Judul Bagian */
        .section-title::before,
        .section-title::after {
            content: ' \2740 '; /* Unicode karakter bunga ❀ */
            font-size: 0.8em;
            color: #C9B88E; /* Warna Emas Kusam */
            margin: 0 0.5em;
            opacity: 0.7;
        }

        /* Animasi Fade-in saat di-scroll */
        .fade-in-section {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- 1. Halaman Muka (Cover) -->
    <!-- Diperbarui dengan warna baru -->
    <section id="hero" class="h-screen flex flex-col items-center justify-center text-center p-6 bg-cover bg-center" style="background-image: linear-gradient(to top, rgba(92, 84, 80, 0.7), rgba(92, 84, 80, 0.3)), url('assets/images/cover1.png');">
        <h4 class="text-xl md:text-2xl text-white font-light mb-4">The Wedding Of</h4>
        <h1 class="text-6xl md:text-8xl text-white font-bold mb-6" style="color: #fff;">Endeh & Idess</h1>
        <h3 class="text-xl md:text-2xl text-white mb-8" style="color: #fff;">30.11.2025</h3>
        
        <div class="bg-white/80 p-6 rounded-lg shadow-lg">
            <p class="mb-4">Kepada Yth.</p>
            <p class="text-1xl font-bold text-gray-900 mb-4">Bapak/Ibu .........</p>
            <!-- Diperbarui dengan tombol gradasi baru -->
            <button onclick="openInvitation()" class="bg-gradient-to-r from-[#B18F93] to-[#c1a2a5] text-white px-8 py-3 rounded-full font-semibold hover:from-[#B18F93] hover:to-[#B18F93] transition-all duration-300 shadow-lg">
                Buka Undangan
            </button>
        </div>
    </section>

    <!-- Konten Utama (Awalnya tersembunyi) -->
    <main id="main-content" class="hidden">

        <!-- 2. Salam & Mempelai -->
        <section id="mempelai" class="section fade-in-section">
            <!-- Diperbarui: Ukuran font ayat lebih kecil -->
            <p class="text-xl md:text-2xl mb-4">وَمِنْ اٰيٰتِهٖٓ اَنْ خَلَقَ لَكُمْ مِّنْ اَنْفُسِكُمْ اَزْوَاجًا لِّتَسْكُنُوْٓا اِلَيْهَا وَجَعَلَ بَيْنَكُمْ مَّوَدَّةً وَّرَحْمَةًۗ اِنَّ فِيْ ذٰلِكَ لَاٰيٰتٍ لِّقَوْمٍ يَّتَفَكَّرُوْنَ</p>
            <p class="max-w-2xl mx-auto text-base italic mb-8">
            "Di antara tanda-tanda (kebesaran)-Nya ialah bahwa Dia menciptakan pasangan-pasangan untukmu dari (jenis) dirimu sendiri agar kamu merasa tenteram kepadanya. Dia menjadikan di antaramu rasa cinta dan kasih sayang..."
            </p>
            <p class="max-w-2xl mx-auto text-base mb-12">
            (QS. Ar-Rum: 21)
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 items-center gap-8 md:gap-4">
                <!-- Mempelai Wanita -->
                 <div class="flex flex-col items-center text-center">
                    <img src="assets/images/endeh.png" class="w-40 h-40 md:w-48 md:h-48 rounded-full object-cover shadow-xl border-4 border-white mb-4" alt="Foto Mempelai Pria" onerror="this.onerror=null;this.src='https://placehold.co/200x200/D1C0A8/4B3F36?text=Foto+Endeh';">
                    <h3 class="text-3xl mb-2">Solahuddin Djakfar</h3>
                    <p class="font-semibold">Anak dari Pasangan</p>
                    <!-- Diperbarui: Nama orang tua dipisah -->
                    <p class="font-medium">Bapak H. Djakpar Siddiq</p>
                    <p class="font-medium">& Ibu Hj. Kusmami Adamah</p>

                    <!-- BARU: Tombol Instagram -->
                    <a href="#" target="_blank" class="mt-4 inline-flex items-center gap-2 bg-gray-100 text-[#B18F93] px-4 py-1 rounded-full text-sm font-semibold hover:bg-gray-200 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.703.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.297-.048c.852-.04 1.433-.174 1.942-.372.526-.205.972-.478 1.417-.923.445-.444.719-.89.923-1.417.198-.51.333-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.444-.048-3.297c-.04-.852-.174-1.433-.372-1.942a3.926 3.926 0 0 0-.923-1.417A3.926 3.926 0 0 0 13.24.42c-.51-.198-1.09-.333-1.942-.372C10.445.01 10.173 0 8 0zm0 1.44c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.282.24.705.275 1.485.039.843.047 1.096.047 3.233s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485-.145.373-.319.64-.598.92-.28.28-.546.453-.92.598-.282.11-.705.24-1.485.275-.843.038-1.096.047-3.232.047s-2.389-.009-3.232-.047c-.78-.036-1.203-.166-1.485-.275a2.47 2.47 0 0 1-.92-.598 2.47 2.47 0 0 1-.6-.92c-.109-.282-.24-.705-.275-1.485C1.44 10.39 1.432 10.145 1.432 8s.008-2.389.047-3.232c.036-.78.166-1.203.275-1.485a2.47 2.47 0 0 1 .598-.92 2.47 2.47 0 0 1 .92-.598c.282-.11.705-.24 1.485-.275C5.611 1.447 5.855 1.44 8 1.44zM8 3.88c-2.27 0-4.108 1.839-4.108 4.108s1.839 4.108 4.108 4.108 4.108-1.839 4.108-4.108S10.27 3.88 8 3.88zM8 10.51c-1.39 0-2.518-1.128-2.518-2.518S6.61 5.472 8 5.472 10.518 6.6 10.518 8 9.39 10.51 8 10.51zM13.84 3.09c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/>
                        </svg>
                        Instagram
                    </a>
                </div>
                
                <!-- Simbol & -->
                <div class="text-6xl md:text-8xl font-serif text-gray-300">&amp;</div>
                
                <!-- Mempelai Pria -->
                 <div class="flex flex-col items-center text-center">
                    <img src="assets/images/ides.png" class="w-40 h-40 md:w-48 md:h-48 rounded-full object-cover shadow-xl border-4 border-white mb-4" alt="Foto Mempelai Wanita" onerror="this.onerror=null;this.src='https://placehold.co/200x200/D1C0A8/4B3F36?text=Foto+Idess';">
                    <h3 class="text-3xl mb-2">Desmaleni Sollah</h3>
                    <p class="font-semibold">Anak dari Pasangan</p>
                    <!-- Diperbarui: Nama orang tua dipisah -->
                    <p class="font-medium">Bapak Solah H. Muin</p>
                    <p class="font-medium">& Ibu Saimur Asa'ari Hoib</p>

                    <!-- BARU: Tombol Instagram -->
                    <a href="#" target="_blank" class="mt-4 inline-flex items-center gap-2 bg-gray-100 text-[#B18F93] px-4 py-1 rounded-full text-sm font-semibold hover:bg-gray-200 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.703.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.297-.048c.852-.04 1.433-.174 1.942-.372.526-.205.972-.478 1.417-.923.445-.444.719-.89.923-1.417.198-.51.333-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.444-.048-3.297c-.04-.852-.174-1.433-.372-1.942a3.926 3.926 0 0 0-.923-1.417A3.926 3.926 0 0 0 13.24.42c-.51-.198-1.09-.333-1.942-.372C10.445.01 10.173 0 8 0zm0 1.44c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.282.24.705.275 1.485.039.843.047 1.096.047 3.233s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485-.145.373-.319.64-.598.92-.28.28-.546.453-.92.598-.282.11-.705.24-1.485.275-.843.038-1.096.047-3.232.047s-2.389-.009-3.232-.047c-.78-.036-1.203-.166-1.485-.275a2.47 2.47 0 0 1-.92-.598 2.47 2.47 0 0 1-.6-.92c-.109-.282-.24-.705-.275-1.485C1.44 10.39 1.432 10.145 1.432 8s.008-2.389.047-3.232c.036-.78.166-1.203.275-1.485a2.47 2.47 0 0 1 .598-.92 2.47 2.47 0 0 1 .92-.598c.282-.11.705-.24 1.485-.275C5.611 1.447 5.855 1.44 8 1.44zM8 3.88c-2.27 0-4.108 1.839-4.108 4.108s1.839 4.108 4.108 4.108 4.108-1.839 4.108-4.108S10.27 3.88 8 3.88zM8 10.51c-1.39 0-2.518-1.128-2.518-2.518S6.61 5.472 8 5.472 10.518 6.6 10.518 8 9.39 10.51 8 10.51zM13.84 3.09c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/>
                        </svg>
                        Instagram
                    </a>
                </div>
            </div>
        </section>

        <!-- 3. Lokasi & Waktu -->
         <section id="mempelai" class="section fade-in-section">
            <p class="text-xl md:text-2xl mb-4">السَّلاَمُ عَلَيْكُمْ وَرَحْمَةُ اللهِ وَبَرَكَاتُهُ</p>
            <p class="max-w-2xl mx-auto text-base italic mb-8">
            Atas Berkah dan Rahmat Allah Subhanallahu Wa Ta'ala. Tanpa mengurangi rasa hormat. Kami mengundang Bapak/Ibu/Saudara/i serta kerabat sekalian untuk menghadiri acara pernikahan kami :
            </p>
        </section> 

        <section id="lokasi" class="section fade-in-section bg-white/80 shadow-inner">
            <h2 class="text-4xl md:text-5xl mb-12 section-title">Save the Date</h2>

            <!-- Countdown Timer -->
            <div id="countdown" class="flex justify-center gap-4 md:gap-8 text-center mb-12">
                <div class="bg-white shadow-lg rounded-lg p-4 md:p-6 w-20 md:w-28">
                    <span id="days" class="text-4xl md:text-5xl font-bold">00</span>
                    <span class="block text-sm">Hari</span>
                </div>
                <div class="bg-white shadow-lg rounded-lg p-4 md:p-6 w-20 md:w-28">
                    <span id="hours" class="text-4xl md:text-5xl font-bold">00</span>
                    <span class="block text-sm">Jam</span>
                </div>
                <div class="bg-white shadow-lg rounded-lg p-4 md:p-6 w-20 md:w-28">
                    <span id="minutes" class="text-4xl md:text-5xl font-bold">00</span>
                    <span class="block text-sm">Menit</span>
                </div>
                <div class="bg-white shadow-lg rounded-lg p-4 md:p-6 w-20 md:w-28">
                    <span id="seconds" class="text-4xl md:text-5xl font-bold">00</span>
                    <span class="block text-sm">Detik</span>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <!-- Akad Nikah -->
                <!-- Diperbarui dengan border aksen emas -->
                <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-[#C9B88E]">
                    <h3 class="text-3xl mb-4">Akad Nikah</h3>
                    <p class="text-lg font-semibold mb-2">Minggu, 30 November 2025</p>
                    <p class="mb-4">08:00 - 09:30 WIB</p>
                    <hr class="w-1/4 mx-auto my-4">
                    <p class="font-semibold text-lg">Rumah Kediaman Mempelai Wanita</p>
                    <p class="mb-6 text-sm">Jl. Bhakti Guna, Samping Kantor Pertanian, Ds. Tanjung Seteko, Kec. Indralaya, Kabupaten Ogan Ilir, Sumatera Selatan 30817</p>
                    <a href="https://maps.app.goo.gl/E4ZqTzLwyBgXE9k86" target="_blank" class="bg-[#B18F93] text-white px-6 py-2 rounded-full font-semibold hover:bg-[#a17c80] transition-colors duration-300">
                        Lihat Lokasi
                    </a>
                </div>
                
                <!-- Resepsi -->
                <!-- Diperbarui dengan border aksen emas -->
                <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-[#C9B88E]">
                    <h3 class="text-3xl mb-4">Resepsi</h3>
                    <p class="text-lg font-semibold mb-2">Minggu, 30 November 2025</p>
                    <p class="mb-4">11:00 - Selesai</p>
                    <hr class="w-1/4 mx-auto my-4">
                     <p class="font-semibold text-lg">Rumah Kediaman Mempelai Wanita</p>
                    <p class="mb-6 text-sm">Jl. Bhakti Guna, Samping Kantor Pertanian, Ds. Tanjung Seteko, Kec. Indralaya, Kabupaten Ogan Ilir, Sumatera Selatan 30817</p>
                    <a href="https://maps.app.goo.gl/E4ZqTzLwyBgXE9k86" target="_blank" class="bg-[#B18F93] text-white px-6 py-2 rounded-full font-semibold hover:bg-[#a17c80] transition-colors duration-300">
                        Lihat Lokasi
                    </a>
                </div>
            </div>
        </section>

        <!-- 4. Galeri Foto -->
        <!-- Diperbarui: Galeri menjadi 4 foto -->
        <section id="galeri" class="section fade-in-section">
            <h2 class="text-4xl md:text-5xl mb-12 section-title">Galeri Bahagia</h2>
            <div class="grid grid-cols-2 md:grid-cols-2 gap-4 max-w-3xl mx-auto">
                <img src="assets/images/1.png" alt="Galeri Foto 1" class="rounded-lg shadow-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x600/D1C0A8/4B3F36?text=Foto+1';">
                <img src="assets/images/2.png" alt="Galeri Foto 2" class="rounded-lg shadow-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x600/AFA08B/4B3F36?text=Foto+2';">
                <img src="assets/images/3.png" alt="Galeri Foto 3" class="rounded-lg shadow-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x600/D1C0A8/4B3F36?text=Foto+3';">
                <img src="assets/images/4.png" alt="Galeri Foto 4" class="rounded-lg shadow-md w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x600/AFA08B/4B3F36?text=Foto+4';">
            </div>
        </section>
        
        <!-- 6. Ucapan & Doa -->
        <section id="ucapan" class="section fade-in-section">
            <h2 class="text-4xl md:text-5xl mb-12 section-title">Ucapan & Doa</h2>
            
            <!-- Formulir Ucapan -->
            <form id="form-ucapan" class="max-w-xl mx-auto bg-white p-8 rounded-xl shadow-lg text-left">
                <div class="mb-4">
                    <label for="nama_ucapan" class="block text-sm font-semibold mb-2">Nama Anda:</label>
                    <!-- Diperbarui dengan focus ring emas -->
                    <input type="text" id="nama_ucapan" name="nama_ucapan" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C9B88E]" required>
                </div>
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <label for="isi_ucapan" class="block text-sm font-semibold">Ucapan Anda:</label>
                        <div class="flex gap-4">
                            <!-- Diperbarui: Tombol AI dengan warna baru -->
                            <button type="button" id="gemini-button" onclick="generateGreeting()" class="text-sm text-[#B18F93] hover:underline font-semibold disabled:text-gray-400 disabled:no-underline">
                                ✨ Bantu Tuliskan
                            </button>
                            <button type="button" id="pantun-button" onclick="generatePantun()" class="text-sm text-[#B18F93] hover:underline font-semibold disabled:text-gray-400 disabled:no-underline">
                                ✨ Buat Pantun
                            </button>
                        </div>
                    </div>
                    <!-- Diperbarui dengan focus ring emas -->
                    <textarea id="isi_ucapan" name="isi_ucapan" rows="4" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C9B88E]" placeholder="Tuliskan ucapan dan doa Anda di sini..." required></textarea>
                </div>
                <!-- Diperbarui dengan tombol gradasi baru -->
                <button type="submit" class="bg-gradient-to-r from-[#B18F93] to-[#c1a2a5] text-white px-8 py-3 rounded-full font-semibold hover:from-[#B18F93] hover:to-[#B18F93] transition-all duration-300 w-full">
                    Kirim Ucapan
                </button>
                <p id="ucapan-success" class="text-green-600 text-center mt-4 hidden">Terima kasih atas ucapannya!</p>
            </form>

            <!-- Daftar Ucapan -->
            <div id="ucapan-list" class="max-w-xl mx-auto mt-12 text-left space-y-4">
                <!-- Contoh Ucapan -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h4 class="text-lg font-semibold mb-1">Fauzan Azhiman</h4>
                    <p class="text-gray-700">"Barakallahu laka wabaraka 'alaika wajama'a bainakuma fii khoir. Semoga lancar sampai hari H dan menjadi keluarga yang sakinah, mawaddah, warahmah."</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h4 class="text-lg font-semibold mb-1">Keluarga Sollah H.Muin</h4>
                    <p class="text-gray-700">"Happy wedding, Idess! Senang sekali akhirnya. Semoga bahagia selalu!"</p>
                </div>
                <!-- Ucapan baru akan ditambahkan di sini oleh JavaScript -->
            </div>
        </section>

        <!-- 7. Penutup -->
        <!-- Diperbarui dengan footer gradasi baru -->
        <footer class="section bg-gradient-to-t from-[#B18F93] to-[#c1a2a5] text-white">
            <p class="max-w-2xl mx-auto text-lg mb-5">
                Merupakan suatu kehormatan dan kebahagiaan bagi kami apabila Anda berkenan hadir untuk memberikan doa restu. Atas kehadiran dan doa restunya, kami ucapkan terima kasih.
            </p>
            <h3 class="text-2xl mb-8">بَارَكَ اللهُ لَكَ وَبَارَكَ عَلَيْكَ وَجَمَعَ بَيْنَكُمَا فِي خَيْرٍ</h3>
            <h2 class="text-5xl md:text-6xl">Endeh & Idess</h2>
            <p class="mt-8 text-sm text-gray-300">© 2025 Endeh & Idess. Dibuat dengan penuh cinta.</p>
            <p class="mt-8 text-sm text-gray-300">Create By Fauzan Azhiman</p>
        </footer>
    
    </main>

    <!-- Audio Player -->
    <audio id="background-music" loop>
        <source src="assets/music/itiraf.mp3" type="audio/mpeg">
        Browser Anda tidak mendukung elemen audio.
    </audio>

    <!-- Tombol Play/Pause Musik -->
    <!-- Diperbarui dengan warna baru -->
    <button id="play-pause-btn" class="hidden fixed bottom-5 right-5 z-50 bg-white/70 text-[#B18F93] w-12 h-12 rounded-full shadow-lg flex items-center justify-center transition-opacity duration-300">
        <!-- Ikon SVG untuk Play -->
        <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="hidden">
            <path d="M8 5v14l11-7z"/>
        </svg>
        <!-- Ikon SVG untuk Pause -->
        <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="hidden">
            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
        </svg>
    </button>

    <script>
        // 1. Fungsi untuk membuka undangan
        function openInvitation() {
            document.getElementById('main-content').classList.remove('hidden');
            document.getElementById('mempelai').scrollIntoView({ behavior: 'smooth' });

            const audio = document.getElementById('background-music');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');

            if (audio) {
                audio.play().catch(error => console.warn("Autoplay dicegah oleh browser.", error));
                playPauseBtn.classList.remove('hidden');
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            }
        }

        // 2. Countdown Timer
        const weddingDate = new Date("Nov 30, 2025 08:00:00").getTime();
        const countdownInterval = setInterval(() => {
            const now = new Date().getTime();
            const distance = weddingDate - now;

            if (distance < 0) {
                clearInterval(countdownInterval);
                document.getElementById("countdown").innerHTML = "<h3 class='text-3xl'>The day is here!</h3>";
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("days").innerText = days.toString().padStart(2, '0');
            document.getElementById("hours").innerText = hours.toString().padStart(2, '0');
            document.getElementById("minutes").innerText = minutes.toString().padStart(2, '0');
            document.getElementById("seconds").innerText = seconds.toString().padStart(2, '0');
        }, 1000);

        // 3. Fungsi Kirim Ucapan
        document.getElementById('form-ucapan').addEventListener('submit', function(event) {
            event.preventDefault();
            const nama = document.getElementById('nama_ucapan').value;
            const ucapan = document.getElementById('isi_ucapan').value;

            if (!nama || !ucapan) {
                alert('Harap isi nama dan ucapan Anda.');
                return;
            }

            const ucapanBaru = document.createElement('div');
            ucapanBaru.className = 'bg-white p-6 rounded-lg shadow-md animate-pulse';
            ucapanBaru.innerHTML = `
                <h4 class="text-lg font-semibold mb-1">${nama}</h4>
                <p class="text-gray-700">"${ucapan}"</p>
            `;
            document.getElementById('ucapan-list').prepend(ucapanBaru);
            
            setTimeout(() => ucapanBaru.classList.remove('animate-pulse'), 500);
            document.getElementById('form-ucapan').reset();

            const successMsg = document.getElementById('ucapan-success');
            successMsg.classList.remove('hidden');
            setTimeout(() => successMsg.classList.add('hidden'), 3000);
        });

        // 4. Fungsi Salin ke Clipboard
        function copyToClipboard(text, feedbackElementId) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                const feedbackEl = document.getElementById(feedbackElementId);
                feedbackEl.innerText = "Tersalin!";
                setTimeout(() => { feedbackEl.innerText = ""; }, 2000);
            } catch (err) {
                console.error('Gagal menyalin: ', err);
            }
            document.body.removeChild(textArea);
        }

        // 5. Kontrol Musik Play/Pause
        const audio = document.getElementById('background-music');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');

        if (playPauseBtn && audio) {
            playPauseBtn.addEventListener('click', () => {
                if (audio.paused) {
                    audio.play();
                } else {
                    audio.pause();
                }
            });
            audio.onpause = () => {
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            };
            audio.onplay = () => {
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            };
        }

        // 6. Animasi Fade-in saat Scroll
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('.fade-in-section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        // Opsional: Hentikan observasi setelah animasi berjalan
                        // observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.1 // Picu animasi saat 10% bagian terlihat
            });

            sections.forEach(section => {
                observer.observe(section);
            });
        });

        // ======================================================
        // FITUR GEMINI API (UCAPAN & PANTUN)
        // ======================================================

        async function fetchWithBackoff(url, options, retries = 5, delay = 1000) {
            try {
                const response = await fetch(url, options);
                if (!response.ok) {
                    if ((response.status >= 500 || response.status === 429) && retries > 0) {
                        await new Promise(resolve => setTimeout(resolve, delay));
                        return fetchWithBackoff(url, options, retries - 1, delay * 2);
                    } else {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                }
                return response.json();
            } catch (error) {
                console.error("Fetch error:", error.message);
                throw error;
            }
        }

        async function generateGreeting() {
            const button = document.getElementById('gemini-button');
            const textarea = document.getElementById('isi_ucapan');
            const originalButtonText = button.innerHTML;
            button.innerHTML = 'Memuat...';
            button.disabled = true;
            textarea.placeholder = 'Meminta bantuan AI...';

            const apiKey = ""; // Diisi oleh environment
            const apiUrl = `https://generativanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const prompt = "Anda adalah tamu di pernikahan Endeh & Idess. Tuliskan ucapan pernikahan yang singkat (1-2 kalimat), hangat, dan sopan untuk mereka dalam Bahasa Indonesia. Berikan hanya teks ucapannya saja, tanpa pembuka atau penutup tambahan (contoh: 'Selamat...').";

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: { maxOutputTokens: 100, temperature: 0.8, topP: 0.9 }
            };

            try {
                const result = await fetchWithBackoff(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (result.candidates && result.candidates[0].content.parts[0].text) {
                    let generatedText = result.candidates[0].content.parts[0].text;
                    textarea.value = generatedText.replace(/^"|"$/g, '').trim();
                } else {
                    textarea.placeholder = 'Maaf, gagal membuat ucapan. Coba lagi.';
                    console.error("Error: Respons API tidak valid", result);
                }
            } catch (error) {
                console.error("Error generating greeting:", error);
                textarea.placeholder = 'Terjadi kesalahan. Silakan tulis manual.';
            } finally {
                button.innerHTML = originalButtonText;
                button.disabled = false;
            }
        }

        async function generatePantun() {
            const button = document.getElementById('pantun-button');
            const textarea = document.getElementById('isi_ucapan');
            const originalButtonText = button.innerHTML;
            button.innerHTML = 'Memuat...';
            button.disabled = true;
            textarea.placeholder = 'Meminta bantuan AI membuat pantun...';

            const apiKey = ""; // Diisi oleh environment
            const apiUrl = `https://generativanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const prompt = "Anda adalah tamu di pernikahan Endeh & Idess. Buatkan sebuah pantun 4 baris (ABAB) yang sopan dan berisi doa restu untuk pernikahan mereka dalam Bahasa Indonesia. Berikan hanya teks pantunnya saja, tanpa pembuka atau penutup.";

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: { maxOutputTokens: 150, temperature: 0.9, topP: 0.9 }
            };

            try {
                const result = await fetchWithBackoff(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (result.candidates && result.candidates[0].content.parts[0].text) {
                    let generatedText = result.candidates[0].content.parts[0].text;
                    textarea.value = generatedText.replace(/^"|"$/g, '').trim();
                } else {
                    textarea.placeholder = 'Maaf, gagal membuat pantun. Coba lagi.';
                    console.error("Error: Respons API tidak valid", result);
                }
            } catch (error) {
                console.error("Error generating pantun:", error);
                textarea.placeholder = 'Terjadi kesalahan. Silakan tulis manual.';
            } finally {
                button.innerHTML = originalButtonText;
                button.disabled = false;
            }
        }
    </script>
</body>
</html>
